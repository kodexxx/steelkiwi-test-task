(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){},15:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),l=a.n(o),s=(a(13),a(1)),c=a(2),i=a(4),m=a(3),u=a(5),d=(a(15),"/api/"),h=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={nowFormLock:!1,error:null,mode:"auth"},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onRegistrationSubmit",value:function(e){var t=this;this.setState({nowFormLock:!0}),e.preventDefault();var a={};a.id=e.target.userid.value,a.password=e.target.password.value;var n=Object.keys(a).map(function(e){return e+"="+a[e]}).join("&");return fetch(d+"signup",{method:"POST",body:n,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(e){t.setState({nowFormLock:!1}),null!=e.error?t.setState({error:e.error}):(t.setState({error:null}),t.props.onGetToken(e.responce.token))}).catch(function(e){t.setState({error:e}),console.log(e)}),!1}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"card mt-3"},r.a.createElement("div",{className:"card-header"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(t){return e.onRegistrationSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"userid"},"ID \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement("input",{type:"text",className:"form-control",id:"userid",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 ID"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.nowFormLock},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("button",{className:"btn btn-link",onClick:function(){return e.props.changeMode("auth")}},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("div",{style:{height:"40px"},className:"mt-3"},this.state.nowFormLock&&r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:"100%"}})),!this.state.nowFormLock&&null!=this.state.error&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.error))))))}}]),t}(n.Component),p=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={nowFormLock:!1,error:null,mode:"auth"},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onAuthSubmit",value:function(e){var t=this;this.setState({nowFormLock:!0}),e.preventDefault();var a={};a.id=e.target.userid.value,a.password=e.target.password.value;var n=Object.keys(a).map(function(e){return e+"="+a[e]}).join("&");return fetch(d+"signin",{method:"POST",body:n,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(e){t.setState({nowFormLock:!1}),null!=e.error?t.setState({error:e.error}):(t.setState({error:null}),t.props.onGetToken(e.responce))}).catch(function(e){t.setState({error:e}),console.log(e)}),!1}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement("div",{className:"card mt-3"},r.a.createElement("div",{className:"card-header"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(t){return e.onAuthSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"userid"},"ID \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement("input",{type:"text",className:"form-control",id:"userid",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 ID"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.nowFormLock},"\u0412\u0432\u043e\u0439\u0442\u0438"),r.a.createElement("button",{className:"btn btn-link",onClick:function(){return e.setState({mode:"reg"})}},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("div",{style:{height:"40px"},className:"mt-3"},this.state.nowFormLock&&r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:"100%"}})),!this.state.nowFormLock&&null!=this.state.error&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.error))))));return"auth"===this.state.mode?t:r.a.createElement(h,{onGetToken:function(t){return e.props.onGetToken(t)},changeMode:function(t){return e.setState({mode:t})}})}}]),t}(n.Component),f=(a(17),function(e){function t(e){var a;Object(s.a)(this,t),a=Object(i.a)(this,Object(m.a)(t).call(this,e));var n=localStorage.getItem("token");return"null"===n&&(n=null),a.state={token:n,info:{},ping:0},console.log(a.state.token),a.updateInfo(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateInfo",value:function(){var e=this;fetch(d+"info",{headers:{Authorization:"Bearer "+this.state.token}}).then(function(e){return e.json()}).then(function(t){console.log(t),null==t.error?e.setState({info:t.responce}):(e.setState({token:null}),localStorage.setItem("token",null))}).catch(function(t){e.setState({token:null}),localStorage.setItem("token",null)})}},{key:"onPassToken",value:function(e){console.log("auth form, new token"),this.setState({token:e}),localStorage.setItem("token",e),this.updateInfo()}},{key:"pingGoogle",value:function(){var e=this;fetch(d+"latency",{headers:{Authorization:"Bearer "+this.state.token}}).then(function(e){return e.json()}).then(function(t){console.log(t),null==t.error?e.setState({ping:t.responce}):(e.setState({token:null}),localStorage.setItem("token",null))}).catch(function(t){e.setState({token:null}),localStorage.setItem("token",null)})}},{key:"logOut",value:function(e){var t=this;e=e?"true":"false",fetch(d+"logout?all="+e,{headers:{Authorization:"Bearer "+this.state.token}}).then(function(e){return e.json()}).then(function(e){t.setState({token:null}),localStorage.setItem("token",null)}).catch(function(e){t.setState({token:null}),localStorage.setItem("token",null)})}},{key:"render",value:function(){var e=this,t=r.a.createElement(p,{onGetToken:function(t){return e.onPassToken(t)}}),a=r.a.createElement("div",null,r.a.createElement("div",{className:"card mt-3"},r.a.createElement("div",{className:"card-header"},"ping google.com"),r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("span",null,this.state.ping),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.pingGoogle()}},"ping"))),r.a.createElement("div",{className:"card mt-3"},r.a.createElement("div",{className:"card-header"},"\u041e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435"),r.a.createElement("div",{className:"card-body"},r.a.createElement("b",null,"ID: "),r.a.createElement("span",null,this.state.info.id),r.a.createElement("br",null),r.a.createElement("b",null,"\u0422\u0438\u043f ID: "),r.a.createElement("span",null,this.state.info.id_type))),r.a.createElement("div",{className:"card mt-3"},r.a.createElement("div",{className:"card-header"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.logOut(!1)}},"\u0412\u044b\u0439\u0442\u0438"),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-primary mt-3",onClick:function(){return e.logOut(!0)}},"\u0412\u044b\u0439\u0442\u0438 \u0441\u043e \u0432\u0441\u0435\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432"))));return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4"}),r.a.createElement("div",{className:"col-lg-4 col-sm-12"},null==this.state.token?t:a),r.a.createElement("div",{className:"col-lg-4"}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports=a(19)}},[[8,2,1]]]);
//# sourceMappingURL=main.391199b6.chunk.js.map